{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/lihan2/Documents/project/chatui4cythera/src/app/api/daily-report/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\n// ç”Ÿæˆåˆ†ææŠ¥å‘Šï¼Œè¿”å›å¸¦æœ‰ markdown å†…å®¹å’Œ DSL é…ç½®çš„å“åº”\nfunction generateAnalysisReport() {\n  const currentDate = new Date().toLocaleDateString('zh-CN');\n  const monthlyGrowth = ((280 - 250) / 250 * 100).toFixed(1);\n  \n  const markdownContent = `\n# ğŸ“Š æ‹›è˜æ•°æ®åˆ†ææŠ¥å‘Š\n**æ—¥æœŸ:** ${currentDate}\n\n## å…³é”®æŒ‡æ ‡\n| æŒ‡æ ‡ | å€¼ |\n|------|----|\n| æ€»å€™é€‰äºº | 280 |\n| çƒ­é—¨èŒä½ | å·¥ç¨‹å¸ˆ |\n| çƒ­é—¨æŠ€èƒ½ | JavaScript |\n| å¹³å‡è–ªèµ„ | 18k |\n\n## è¶‹åŠ¿åˆ†æ\n- **æœˆåº¦å¢é•¿:** ${monthlyGrowth}%\n- **æŠ€èƒ½éœ€æ±‚:**\n  - JavaScript: 90\n  - Python: 55\n  - React: 60\n- **è–ªèµ„åˆ†å¸ƒ:**\n  - 10-20k: 110\n  - 20-30k: 90\n  - 30k+: 50\n\n## å»ºè®®\n${[\n  'åŠ å¼ºå·¥ç¨‹å¸ˆå²—ä½æ‹›è˜åŠ›åº¦',\n  'å¢åŠ JavaScriptç›¸å…³åŸ¹è®­èµ„æº',\n  'å…³æ³¨10-20kè–ªèµ„åŒºé—´å€™é€‰äºº'\n].map(rec => `- ${rec}`).join('\\n')}\n`;\n\n  // åˆ›å»ºç¬¦åˆ ThinkData ç»“æ„çš„ DSL å†…å®¹\n  const dslContent = {\n    layout: \"grid(2, 2)\",\n    cards: [\n      {\n        type: \"summary\",\n        metrics: [\n          { title: \"æ€»å€™é€‰äºº\", value: 280, trend: \"+12%\" },\n          { title: \"çƒ­é—¨èŒä½\", value: \"å·¥ç¨‹å¸ˆ\" },\n          { title: \"å¹³å‡è–ªèµ„\", value: \"18k\" }\n        ]\n      }\n    ],\n    charts: [\n      {\n        type: \"bar\",\n        data: [\n          { name: \"1æœˆ\", value: 120 },\n          { name: \"2æœˆ\", value: 150 },\n          { name: \"3æœˆ\", value: 180 },\n          { name: \"4æœˆ\", value: 200 },\n          { name: \"5æœˆ\", value: 220 },\n          { name: \"6æœˆ\", value: 250 },\n          { name: \"7æœˆ\", value: 280 }\n        ],\n        title: \"æœˆåº¦å€™é€‰äººè¶‹åŠ¿\",\n        xAxis: \"æœˆä»½\",\n        yAxis: \"äººæ•°\"\n      },\n      {\n        type: \"pie\",\n        data: [\n          { name: \"engineering\", value: 100 },\n          { name: \"marketing\", value: 60 },\n          { name: \"sales\", value: 50 },\n          { name: \"design\", value: 25 },\n          { name: \"hr\", value: 45 }\n        ],\n        title: \"èŒä½åˆ†å¸ƒ\"\n      },\n      {\n        type: \"radar\",\n        data: [\n          { skill: \"javascript\", value: 90 },\n          { skill: \"python\", value: 55 },\n          { skill: \"java\", value: 50 },\n          { skill: \"react\", value: 60 },\n          { skill: \"sql\", value: 45 }\n        ],\n        title: \"æŠ€èƒ½åˆ†å¸ƒ\"\n      }\n    ]\n  };\n  \n  // åˆ›å»º ThinkData å¯¹è±¡\n  const thinkData = {\n    content: markdownContent,\n    parsedContent: dslContent,\n    metadata: {\n      title: \"æ‹›è˜æ•°æ®åˆ†æ\",\n      timestamp: new Date().toISOString()\n    }\n  };\n\n  return [\n    {\n      type: 'markdown',\n      content: markdownContent,\n      position: 'left'\n    },\n    {\n      type: 'think',\n      content: thinkData,\n      position: 'pop'\n    }\n  ];\n}\n\n// ç”Ÿæˆèƒ½æºæ•°æ®æŠ¥å‘Š\nfunction generateEnergyReport() {\n  const currentDate = new Date().toLocaleDateString('zh-CN');\n  \n  const markdownContent = `\n# ğŸ“Š èƒ½æºæ¶ˆè€—æ•°æ®åˆ†ææŠ¥å‘Š\n**æ—¥æœŸ:** ${currentDate}\n\n## å…³é”®æŒ‡æ ‡\n| æŒ‡æ ‡ | å€¼ |\n|------|----|  \n| æ€»èƒ½è€— | 12,500 kWh |\n| èŠ‚èƒ½ç‡ | 15% |\n| é«˜å³°æ—¶æ®µ | 14:00-16:00 |\n| å¼‚å¸¸è®¾å¤‡ | 3å·ç©ºè°ƒç³»ç»Ÿ |\n\n## è¶‹åŠ¿åˆ†æ\n- **æœˆåº¦èŠ‚èƒ½:** 15%\n- **è®¾å¤‡èƒ½æ•ˆ:**\n  - ç…§æ˜ç³»ç»Ÿ: ä¼˜\n  - ç©ºè°ƒç³»ç»Ÿ: è‰¯\n  - ç”Ÿäº§è®¾å¤‡: ä¸­\n`;\n\n  // åˆ›å»ºç¬¦åˆ ThinkData ç»“æ„çš„ DSL å†…å®¹\n  // const dslContent = {\n  //   layout: \"grid(2, 2)\",\n  //   cards: [\n  //     {\n  //       type: \"summary\",\n  //       metrics: [\n  //         { title: \"æ€»èƒ½è€—\", value: \"12,500 kWh\", trend: \"-15%\" },\n  //         { title: \"èŠ‚èƒ½ç‡\", value: \"15%\" },\n  //         { title: \"å¼‚å¸¸è®¾å¤‡\", value: \"3å·ç©ºè°ƒ\" }\n  //       ]\n  //     }\n  //   ],\n  //   charts: [\n  //     {\n  //       type: \"bar\",\n  //       data: [\n  //         { name: \"ç…§æ˜\", value: 3200 },\n  //         { name: \"ç©ºè°ƒ\", value: 4500 },\n  //         { name: \"ç”Ÿäº§\", value: 3800 },\n  //         { name: \"å…¶ä»–\", value: 1000 }\n  //       ],\n  //       title: \"èƒ½è€—åˆ†å¸ƒ\",\n  //       xAxis: \"è®¾å¤‡ç±»å‹\",\n  //       yAxis: \"èƒ½è€—(kWh)\"\n  //     },\n  //     {\n  //       type: \"pie\",\n  //       data: [\n  //         { name: \"engineering\", value: 120 },\n  //         { name: \"marketing\", value: 40 },\n  //         { name: \"sales\", value: 30 },\n  //         { name: \"design\", value: 15 },\n  //         { name: \"hr\", value: 25 }\n  //       ],\n  //       title: \"éƒ¨é—¨èƒ½è€—å æ¯”\"\n  //     }\n  //   ]\n  // };\n  const dslContent = {\n    \"layout\": \"grid(2, 2)\",\n    \"cards\": [\n      {\n        \"type\": \"summary\",\n        \"metrics\": [\n          {\n            \"title\": \"æ¯æ—¥ç”¨ç”µé‡æ³¢åŠ¨èŒƒå›´\",\n            \"value\": \"1200 - 1880 kWh\"\n          },\n          {\n            \"title\": \"4æœˆ11æ—¥ç”¨ç”µé‡\",\n            \"value\": \"1880 kWh\",\n            \"trend\": \"ç›¸è¾ƒäºå…¶ä»–æ—¥æœŸåé«˜ï¼Œå¯èƒ½å­˜åœ¨å¼‚å¸¸æ³¢åŠ¨\"\n          },\n          {\n            \"title\": \"å†å²åŸºå‡†ç…§æ˜æ—¥ç”¨ç”µé‡\",\n            \"value\": \"320 kWh\"\n          }\n        ]\n      }\n    ],\n    \"charts\": [\n      {\n        \"type\": \"bar\",\n        \"data\": [\n          {\n            \"name\": \"2025-04-08\",\n            \"value\": 1280\n          },\n          {\n            \"name\": \"2025-04-09\",\n            \"value\": 1420\n          },\n          {\n            \"name\": \"2025-04-10\",\n            \"value\": 1350\n          },\n          {\n            \"name\": \"2025-04-11\",\n            \"value\": 1880\n          },\n          {\n            \"name\": \"2025-04-12\",\n            \"value\": 1200\n          },\n          {\n            \"name\": \"2025-04-13\",\n            \"value\": 1255\n          },\n          {\n            \"name\": \"2025-04-14\",\n            \"value\": 1210\n          }\n        ],\n        \"title\": \"æœ€è¿‘7å¤©ç…§æ˜ç³»ç»Ÿèƒ½è€—è¶‹åŠ¿\",\n        \"xAxis\": \"æ—¥æœŸ\",\n        \"yAxis\": \"ç”µé‡(kWh)\"\n      },\n      {\n        \"type\": \"pie\",\n        \"data\": [\n          {\n            \"name\": \"åŠå…¬åŒºå—ä¾§\",\n            \"value\": 780\n          },\n          {\n            \"name\": \"ç ”å‘åŒº\",\n            \"value\": 540\n          },\n          {\n            \"name\": \"åœ°ä¸‹è½¦åº“\",\n            \"value\": 1200\n          },\n          {\n            \"name\": \"å±‹é¡¶ç©ºè°ƒè®¾å¤‡åŒº\",\n            \"value\": 300\n          }\n        ],\n        \"title\": \"ä¸»è¦èƒ½è€—åŒºåŸŸæ„æˆæ¯”ä¾‹\"\n      }\n    ]\n  }\n;\n  // åˆ›å»º ThinkData å¯¹è±¡\n  const thinkData = {\n    content: markdownContent,\n    parsedContent: dslContent,\n    metadata: {\n      title: \"èƒ½æºæ¶ˆè€—åˆ†æ\",\n      timestamp: new Date().toISOString()\n    }\n  };\n\n  return [\n    {\n      type: 'markdown',\n      content: markdownContent,\n      position: 'left'\n    },\n    {\n      type: 'think',\n      content: thinkData,\n      position: 'pop'\n    }\n  ];\n}\n\n// ç”Ÿæˆå†·åº“ç›‘æ§æŠ¥å‘Š\nfunction generateColdStorageReport() {\n  const currentDate = new Date().toLocaleDateString('zh-CN');\n  \n  const markdownContent = `\n# ğŸ§Š å†·åº“æ¸©åº¦ç›‘æ§æŠ¥å‘Š\n**æ—¥æœŸ:** ${currentDate}\n\n## å…³é”®æŒ‡æ ‡\n| æŒ‡æ ‡ | å€¼ |\n|------|----|  \n| å¹³å‡æ¸©åº¦ | -18.5Â°C |\n| æ¸©åº¦æ³¢åŠ¨ | Â±1.2Â°C |\n| æ¹¿åº¦ | 45% |\n| å¼‚å¸¸åŒºåŸŸ | B3åŒºåŸŸ |\n\n## åˆ†æ\n- **B3åŒºåŸŸæ¸©åº¦æ³¢åŠ¨è¶…å‡ºé¢„è®¾èŒƒå›´**\n- **å»ºè®®æ£€æŸ¥åˆ¶å†·ç³»ç»Ÿ**\n- **ä¼˜åŒ–ç…§æ˜ä½¿ç”¨ï¼Œå‡å°‘çƒ­é‡äº§ç”Ÿ**\n`;\n\n  // åˆ›å»ºç¬¦åˆ ThinkData ç»“æ„çš„ DSL å†…å®¹\n  const dslContent = {\n    layout: \"grid(2, 2)\",\n    cards: [\n      {\n        type: \"summary\",\n        metrics: [\n          { title: \"å¹³å‡æ¸©åº¦\", value: \"-18.5Â°C\", trend: \"+1.2Â°C\" },\n          { title: \"æ¹¿åº¦\", value: \"45%\" },\n          { title: \"å¼‚å¸¸åŒºåŸŸ\", value: \"B3åŒºåŸŸ\" }\n        ]\n      }\n    ],\n    charts: [\n      {\n        type: \"bar\",\n        data: [\n          { name: \"A1åŒº\", value: -20.1 },\n          { name: \"A2åŒº\", value: -19.8 },\n          { name: \"B1åŒº\", value: -19.2 },\n          { name: \"B2åŒº\", value: -18.9 },\n          { name: \"B3åŒº\", value: -16.5 }\n        ],\n        title: \"å„åŒºåŸŸæ¸©åº¦\",\n        xAxis: \"åŒºåŸŸ\",\n        yAxis: \"æ¸©åº¦(Â°C)\"\n      }\n    ]\n  };\n  \n  // åˆ›å»º ThinkData å¯¹è±¡\n  const thinkData = {\n    content: markdownContent,\n    parsedContent: dslContent,\n    metadata: {\n      title: \"å†·åº“æ¸©åº¦ç›‘æ§\",\n      timestamp: new Date().toISOString()\n    }\n  };\n\n  return [\n    {\n      type: 'markdown',\n      content: markdownContent,\n      position: 'left'\n    },\n    {\n      type: 'think',\n      content: thinkData,\n      position: 'pop'\n    }\n  ];\n}\n\n// ç”Ÿæˆå®‰é˜²ç›‘æ§æŠ¥å‘Š\nfunction generateSecurityReport() {\n  const currentDate = new Date().toLocaleDateString('zh-CN');\n  \n  const markdownContent = `\n# ğŸ” å®‰é˜²ç›‘æ§æŠ¥å‘Š\n**æ—¥æœŸ:** ${currentDate}\n\n## å…³é”®æŒ‡æ ‡\n| æŒ‡æ ‡ | å€¼ |\n|------|----|  \n| å®‰é˜²è­¦æŠ¥ | 3æ¬¡ |\n| å¼‚å¸¸äººå‘˜ | 1äººæ¬¡ |\n| ç³»ç»ŸçŠ¶æ€ | æ­£å¸¸ |\n| ç›‘æ§è¦†ç›–ç‡ | 98.5% |\n\n## åˆ†æ\n- **å®‰é˜²è­¦æŠ¥åˆ†æ:** éå·¥ä½œæ—¶é—´è¿›å…¥åŒºåŸŸ\n- **å»ºè®®åŠ å¼ºå…¥å£ç®¡ç†**\n- **å®šæœŸæ£€æŸ¥ç›‘æ§è®¾å¤‡**\n`;\n\n  // åˆ›å»ºç¬¦åˆ ThinkData ç»“æ„çš„ DSL å†…å®¹\n  const dslContent = {\n    layout: \"grid(2, 2)\",\n    cards: [\n      {\n        type: \"summary\",\n        metrics: [\n          { title: \"å®‰é˜²è­¦æŠ¥\", value: \"3æ¬¡\", trend: \"+1æ¬¡\" },\n          { title: \"å¼‚å¸¸äººå‘˜\", value: \"1äººæ¬¡\" },\n          { title: \"ç›‘æ§è¦†ç›–ç‡\", value: \"98.5%\" }\n        ]\n      }\n    ],\n    charts: [\n      {\n        type: \"bar\",\n        data: [\n          { name: \"AåŒº\", value: 1 },\n          { name: \"BåŒº\", value: 2 },\n          { name: \"CåŒº\", value: 0 },\n          { name: \"DåŒº\", value: 0 }\n        ],\n        title: \"å„åŒºåŸŸè­¦æŠ¥æ¬¡æ•°\",\n        xAxis: \"åŒºåŸŸ\",\n        yAxis: \"æ¬¡æ•°\"\n      }\n    ]\n  };\n  \n  // åˆ›å»º ThinkData å¯¹è±¡\n  const thinkData = {\n    content: markdownContent,\n    parsedContent: dslContent,\n    metadata: {\n      title: \"å®‰é˜²ç›‘æ§æŠ¥å‘Š\",\n      timestamp: new Date().toISOString()\n    }\n  };\n\n  return [\n    {\n      type: 'markdown',\n      content: markdownContent,\n      position: 'left'\n    },\n    {\n      type: 'think',\n      content: thinkData,\n      position: 'pop'\n    }\n  ];\n}\n\n// ç”Ÿæˆè®¾å¤‡å¥åº·æŠ¥å‘Š\nfunction generateDeviceHealthReport() {\n  const currentDate = new Date().toLocaleDateString('zh-CN');\n  \n  const markdownContent = `\n# ğŸ”§ è®¾å¤‡å¥åº·çŠ¶æ€æŠ¥å‘Š\n**æ—¥æœŸ:** ${currentDate}\n\n## å…³é”®æŒ‡æ ‡\n| æŒ‡æ ‡ | å€¼ |\n|------|----|  \n| è®¾å¤‡æ€»æ•° | 42å° |\n| å¥åº·è®¾å¤‡ | 38å° |\n| é¢„è­¦è®¾å¤‡ | 3å° |\n| æ•…éšœè®¾å¤‡ | 1å° |\n\n## åˆ†æ\n- **é¢„è­¦è®¾å¤‡:** 2å·ç”Ÿäº§çº¿ã€ç©ºè°ƒä¸»æœºã€åº“æˆ¿ä¼ é€å¸¦\n- **æ•…éšœè®¾å¤‡:** 3å·åŒ…è£…æœº\n- **å»ºè®®å®‰æ’ç»´ä¿®äººå‘˜æ£€æŸ¥æ•…éšœè®¾å¤‡**\n`;\n\n  // åˆ›å»ºç¬¦åˆ ThinkData ç»“æ„çš„ DSL å†…å®¹\n  const dslContent = {\n    layout: \"grid(2, 2)\",\n    cards: [\n      {\n        type: \"summary\",\n        metrics: [\n          { title: \"è®¾å¤‡æ€»æ•°\", value: \"42å°\" },\n          { title: \"å¥åº·ç‡\", value: \"90.5%\", trend: \"-2.3%\" },\n          { title: \"æ•…éšœè®¾å¤‡\", value: \"1å°\" }\n        ]\n      }\n    ],\n    charts: [\n      {\n        type: \"pie\",\n        data: [\n          { name: \"å¥åº·\", value: 38 },\n          { name: \"é¢„è­¦\", value: 3 },\n          { name: \"æ•…éšœ\", value: 1 }\n        ],\n        title: \"è®¾å¤‡å¥åº·çŠ¶æ€åˆ†å¸ƒ\"\n      }\n    ]\n  };\n  \n  // åˆ›å»º ThinkData å¯¹è±¡\n  const thinkData = {\n    content: markdownContent,\n    parsedContent: dslContent,\n    metadata: {\n      title: \"è®¾å¤‡å¥åº·çŠ¶æ€\",\n      timestamp: new Date().toISOString()\n    }\n  };\n\n  return [\n    {\n      type: 'markdown',\n      content: markdownContent,\n      position: 'left'\n    },\n    {\n      type: 'think',\n      content: thinkData,\n      position: 'pop'\n    }\n  ];\n}\n\n// ç”Ÿæˆç»¼åˆè¿è¥æŠ¥å‘Š\nfunction generateOperationReport() {\n  const currentDate = new Date().toLocaleDateString('zh-CN');\n  \n  const markdownContent = `\n# ğŸ“ˆ ç»¼åˆè¿è¥æŠ¥å‘Š\n**æ—¥æœŸ:** ${currentDate}\n\n## å…³é”®æŒ‡æ ‡\n| æŒ‡æ ‡ | å€¼ |\n|------|----|  \n| ç”Ÿäº§æ•ˆç‡ | 92.3% |\n| è®¾å¤‡åˆ©ç”¨ç‡ | 85.7% |\n| èƒ½æºåˆ©ç”¨ç‡ | 78.2% |\n| å®‰å…¨äº‹æ•… | 0æ¬¡ |\n\n## åˆ†æ\n- **ç”Ÿäº§æ•ˆç‡æå‡ 2.1%**\n- **èƒ½æºåˆ©ç”¨ç‡ä¸‹é™ 1.5%**\n- **å»ºè®®ä¼˜åŒ–èƒ½æºè°ƒåº¦ç­–ç•¥**\n`;\n\n  // åˆ›å»ºç¬¦åˆ ThinkData ç»“æ„çš„ DSL å†…å®¹\n  const dslContent = {\n    layout: \"grid(2, 2)\",\n    cards: [\n      {\n        type: \"summary\",\n        metrics: [\n          { title: \"ç”Ÿäº§æ•ˆç‡\", value: \"92.3%\", trend: \"+2.1%\" },\n          { title: \"è®¾å¤‡åˆ©ç”¨ç‡\", value: \"85.7%\" },\n          { title: \"èƒ½æºåˆ©ç”¨ç‡\", value: \"78.2%\", trend: \"-1.5%\" }\n        ]\n      }\n    ],\n    charts: [\n      {\n        type: \"bar\",\n        data: [\n          { name: \"ç”Ÿäº§éƒ¨\", value: 92.3 },\n          { name: \"ç‰©æµéƒ¨\", value: 88.5 },\n          { name: \"é‡‡è´­éƒ¨\", value: 95.2 },\n          { name: \"è´¨æ£€éƒ¨\", value: 91.7 }\n        ],\n        title: \"å„éƒ¨é—¨æ•ˆç‡å¯¹æ¯”\",\n        xAxis: \"éƒ¨é—¨\",\n        yAxis: \"æ•ˆç‡(%)\"\n      }\n    ]\n  };\n  \n  // åˆ›å»º ThinkData å¯¹è±¡\n  const thinkData = {\n    content: markdownContent,\n    parsedContent: dslContent,\n    metadata: {\n      title: \"ç»¼åˆè¿è¥æŠ¥å‘Š\",\n      timestamp: new Date().toISOString()\n    }\n  };\n\n  return [\n    {\n      type: 'markdown',\n      content: markdownContent,\n      position: 'left'\n    },\n    {\n      type: 'think',\n      content: thinkData,\n      position: 'pop'\n    }\n  ];\n}\n\nexport async function POST(request: Request) {\n  try {\n    const { message, role } = await request.json();\n    \n    let response;\n    \n    // æ ¹æ®è§’è‰²å’Œæ¶ˆæ¯å†…å®¹è¿”å›ä¸åŒçš„æŠ¥å‘Š\n    if (role === 'æ•°å­—èƒ½æ•ˆåˆ†æå¸ˆ') {\n      // èƒ½æ•ˆåˆ†æå¸ˆè§’è‰²\n      if (message.includes('èƒ½è€—') || message.includes('èƒ½æ•ˆ') || message.includes('åˆ†æèƒ½è€—æ•°æ®')) {\n        response = generateEnergyReport();\n      } else if (message.includes('èŠ‚èƒ½æŠ¥å‘Š') || message.includes('æŸ¥çœ‹èŠ‚èƒ½æŠ¥å‘Š')) {\n        response = generateEnergyReport();\n      } else {\n        response = generateEnergyReport();\n      }\n    } else if (role === 'æ•°å­—ç¯å¢ƒä¸“å‘˜') {\n      // ç¯å¢ƒä¸“å‘˜è§’è‰²\n      if (message.includes('å†·åº“') || message.includes('æ¸©åº¦') || message.includes('ç›‘æ§å†·åº“æ¸©åº¦')) {\n        response = generateColdStorageReport();\n      } else if (message.includes('ç¯å¢ƒæŒ‡æ ‡') || message.includes('ç¯å¢ƒæŒ‡æ ‡æŠ¥å‘Š')) {\n        response = generateColdStorageReport();\n      } else {\n        response = generateColdStorageReport();\n      }\n    } else if (role === 'æ•°å­—å®‰é˜²ç›‘æ§å‘˜') {\n      // å®‰é˜²ç›‘æ§å‘˜è§’è‰²\n      response = generateSecurityReport();\n    } else if (role === 'æ•°å­—è®¾å¤‡å¥åº·ä¸»ç®¡') {\n      // è®¾å¤‡å¥åº·ä¸»ç®¡è§’è‰²\n      response = generateDeviceHealthReport();\n    } else if (role === 'æ•°å­—ç»¼åˆè¿è¥åè°ƒå‘˜') {\n      // ç»¼åˆè¿è¥åè°ƒå‘˜è§’è‰²\n      response = generateOperationReport();\n    } else if (message.includes('æ—¥æŠ¥')) {\n      response = {\n        type: 'text',\n        content: `è¿™æ˜¯@${role || 'æ•°å­—èƒ½æ•ˆåˆ†æå¸ˆ'} è¿”å›çš„å†…å®¹ï¼Œæ—¥æœŸï¼š${new Date().toISOString()}`,\n        position: 'left'\n      };\n    } else {\n      // é»˜è®¤è¿”å› ç»¼åˆè¿è¥åè°ƒå‘˜è§’è‰²æ•°æ®\n      // response = generateAnalysisReport();\n      response = generateOperationReport();\n\n    }\n    \n    return NextResponse.json(Array.isArray(response) ? response : [response]);\n  } catch (error) {\n    console.error('APIé”™è¯¯:', error);\n    return NextResponse.json(\n      { error: 'å¤„ç†è¯·æ±‚æ—¶å‡ºé”™' },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":"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","debugId":null}}]
}